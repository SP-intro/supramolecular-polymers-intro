<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ページが見つかりません</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, sans-serif; margin: 40px; line-height: 1.7; }
    .box { max-width: 720px; }
    .hint { opacity: 0.8; }
    a { text-decoration: underline; }
  </style>
</head>
<body>
  <div class="box" id="content">
    <h1>ページが見つかりません</h1>
    <p class="hint">ホームに戻って、目次からたどってください。</p>
    <p><a id="homeLink" href="#">ホームへ戻る</a></p>
  </div>

  <script>
    // ★あなたのサイトの「ルートパス」に合わせる（GitHub Pagesのproject siteなら /<repo名>/ ）
    const BASE_PATH = "/supramolecular-polymers-intro/";

    // ★「未完成（準備中）扱いしたいURLパス」をここに追加
    //    末尾スラッシュ無しで統一（例： "introduction/what-is-self-assembly"）
    const COMING_SOON = new Set([
      "supramolecular-polymer/definition",
      "supramolecular-polymer/vs-covalent-polymer",
      "supramolecular-polymer/why-polymer",
      "interactions/hydrogen-bond",
      "interactions/pi-pi",
      "interactions/hydrophobic-effect",
      "interactions/metal-coordination",
      "polymerization/isodesmic",
      "polymerization/cooperative",
      "polymerization/nucleation-growth",
      "polymerization/ring-vs-linear",
      "dynamics/reversibility",
      "dynamics/hysteresis",
      "dynamics/lag-time",
      "characterization/uvvis",
      "characterization/cd",
      "characterization/ir",
      "characterization/scattering",
      "characterization/microscopy",
      "biology-comparison/protein-folding",
      "biology-comparison/fibril-assembly",
      "biology-comparison/bio-vs-artificial",
      "references/reviews",
      "references/classic-papers",
      "references/by-topic"
    ]);

    // ホームリンク
    document.getElementById("homeLink").href = BASE_PATH;

    // 404になった元のパスを取り出す（/repo/.../ を ... に）
    const path = location.pathname;
    let rel = path.startsWith(BASE_PATH) ? path.slice(BASE_PATH.length) : path.replace(/^\/+/, "");
    rel = rel.replace(/\/$/, ""); // 末尾スラッシュ除去

    // "index" はホーム扱い
    if (rel === "" || rel === "index.html") {
      location.replace(BASE_PATH);
    }

    // 未完成リストにあるなら「準備中」へ転送（表示だけにしたいなら replace を外してもOK）
    if (COMING_SOON.has(rel)) {
      location.replace(BASE_PATH + "coming-soon/?from=" + encodeURIComponent(rel));
    } else {
      // 本当に存在しない場合の表示
      const el = document.getElementById("content");
      el.innerHTML = `
        <h1>このページは存在しません</h1>
        <p class="hint">URLが間違っているか、ページが削除された可能性があります。</p>
        <p><a href="${BASE_PATH}">ホームへ戻る</a></p>
      `;
    }
  </script>
</body>
</html>
